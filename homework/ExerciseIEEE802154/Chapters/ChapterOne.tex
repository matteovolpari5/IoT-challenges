\section{Data}
\begin{itemize}
\item $\lambda$ = 0.15 persons/frame
\item Beacon-enabled mode
\item CFP only
\item 1 packet fits 1 slot
\item 1 PAN coordinator
\item 3 camera nodes
\item R = 250 kbps
\item L = 128 Byte
\end{itemize}

\section{Exercise 2.1}
We can compute the Probability Mass Function of the output rate using the Poisson distribution.

\begin{equation}
P(N = k) = \frac{e^{-\lambda} \lambda^k}{k!} = \frac{e^{-0.15} 0.15^k}{k!}
\end{equation}

We can compute the PMF of the output rate by setting the right value of k in the Poisson distribution formula, where N is the observed number of people in the frame.

\begin{equation}
P(r = r_0) = P(N = 0) = \frac{e^{-0.15} 0.15^0}{0!} = e^{-0.15} = 0.8607
\end{equation}

\begin{equation}
P(r = r_1) = P(N = 1) = \frac{e^{-0.15} 0.15^1}{1!} = 0.15 e^{-0.15} = 0.129
\end{equation}

\begin{equation}
\begin{split}
	P(r = r_2) = P(N > 1) = 1 - P(N = 0) - P(N = 1) = \\
	= 1- 0.8607 - 0.1291 = 0.0102
\end{split}
\end{equation}

\section{Exercise 2.2}
We can compute the slot time $T_{s}$ from the definition of nominal bit rate.

\begin{equation}
R = \frac{L}{T_{s}}
\end{equation}

\begin{equation}
T_{s} = \frac{L}{R} = \frac{128 \cdot 8\text{ bit}}{250\text{ kbit/s}} = 4.096\text{ ms}
\end{equation}

We can compute the number of slots needed by the camera nodes, considering the worst case, in which they need to send 6 KByte.

\begin{equation}
N_{node} = \frac{6 \text{ kByte}}{128 \text {Byte}} = 46.875
\end{equation}

In order to compute $N_{CFP}$, we need to consider the ceiling of $N_{node}$, which is the same for the three camera nodes, since they work in the same way and transmit the same packets.

\begin{equation}
N_{CFP} = 3 \cdot \lceil 46.875 \rceil = 3 \cdot 47 = 141
\end{equation}

Since the system doesn't use the CAP, but only the CFP, the active part is formed by the beacon, which uses one slot, and $N_{CFP}$ slots for the camera nodes.

\begin{equation}
T_{ACTIVE} = (N_{CFP} + 1) \cdot T_S = 581.632 \text{ ms}
\end{equation}

From the pseudocode, we observe that camera nodes use a timer of 10 seconds before processing a new frame. For this reason, nodes will use a beacon interval of 10 seconds. We can compute the inactive time and the duty cycle accordingly.

\begin{equation}
BI = 10\text{ s}
\end{equation}

\begin{equation}
T_{INACTIVE} = BI - T_{ACTIVE} = 10\text{ s} - 581.632 \text{ ms} = 9.418368\text{ s}
\end{equation}

\begin{equation}
\eta = \frac{T_{ACTIVE}}{BI} = 0.0581632 = 5.81632\text{ \%}
\end{equation}

\section{Exercise 2.3}
We need to compute the maximum $N_{CFP}$ to have $\eta \leq 10 \%$. We express $\eta$ as a function of $N_{CFP}$ and impose the limit on $\eta$.

\begin{equation}
\eta = \frac{(N_{CFP} + 1) \cdot T_S}{BI} \leq \frac{1}{10}
\end{equation}

\begin{equation}
N_{CFP} \leq \frac{BI}{10 \cdot T_S} - 1 = 243.140625
\end{equation}

Finally, we compute the number of additional cameras, $N_{additional}$, considering that every camera node uses 47 slots and we have 3 camera nodes.

\begin{equation}
N_{additional}Â = \lfloor \frac{243.140625}{47} - 3 \rfloor = 2 
\end{equation}







